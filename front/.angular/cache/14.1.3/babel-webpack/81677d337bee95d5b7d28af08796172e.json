{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"./features/auth/services/auth.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"./services/session.service\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"@angular/flex-layout/flex\";\nimport * as i6 from \"@angular/material/toolbar\";\n\nfunction AppComponent_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\")(1, \"span\", 4);\n    i0.ɵɵtext(2, \"Rentals\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"span\", 5);\n    i0.ɵɵtext(4, \"Account\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"span\", 6);\n    i0.ɵɵlistener(\"click\", function AppComponent_div_4_Template_span_click_5_listener() {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r3 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r3.logout());\n    });\n    i0.ɵɵtext(6, \"Logout\");\n    i0.ɵɵelementEnd()();\n  }\n}\n\nfunction AppComponent_ng_template_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"span\", 7);\n    i0.ɵɵtext(2, \"Login\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"span\", 8);\n    i0.ɵɵtext(4, \"Register\");\n    i0.ɵɵelementEnd()();\n  }\n}\n\nexport class AppComponent {\n  constructor(authService, router, sessionService) {\n    this.authService = authService;\n    this.router = router;\n    this.sessionService = sessionService;\n  }\n\n  ngOnInit() {\n    this.autoLog();\n  }\n\n  $isLogged() {\n    return this.sessionService.$isLogged();\n  }\n\n  logout() {\n    this.sessionService.logOut();\n    this.router.navigate(['']);\n  }\n\n  autoLog() {\n    this.authService.me().subscribe(user => {\n      this.sessionService.logIn(user);\n    }, _ => {\n      this.sessionService.logOut();\n    });\n  }\n\n}\n\nAppComponent.ɵfac = function AppComponent_Factory(t) {\n  return new (t || AppComponent)(i0.ɵɵdirectiveInject(i1.AuthService), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i3.SessionService));\n};\n\nAppComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: AppComponent,\n  selectors: [[\"app-root\"]],\n  decls: 10,\n  vars: 4,\n  consts: [[1, \"app\"], [\"color\", \"primary\", \"fxLayout\", \"row\", \"fxLayoutAlign\", \"space-between center\"], [4, \"ngIf\", \"ngIfElse\"], [\"notLogged\", \"\"], [\"routerLink\", \"rentals\", 1, \"link\"], [\"routerLink\", \"me\", 1, \"link\"], [1, \"link\", 3, \"click\"], [\"routerLink\", \"login\", 1, \"link\"], [\"routerLink\", \"register\", 1, \"link\"]],\n  template: function AppComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"mat-toolbar\", 1)(2, \"span\");\n      i0.ɵɵtext(3, \"Rental app\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(4, AppComponent_div_4_Template, 7, 0, \"div\", 2);\n      i0.ɵɵpipe(5, \"async\");\n      i0.ɵɵtemplate(6, AppComponent_ng_template_6_Template, 5, 0, \"ng-template\", null, 3, i0.ɵɵtemplateRefExtractor);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(8, \"div\");\n      i0.ɵɵelement(9, \"router-outlet\");\n      i0.ɵɵelementEnd()();\n    }\n\n    if (rf & 2) {\n      const _r1 = i0.ɵɵreference(7);\n\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(5, 2, ctx.$isLogged()))(\"ngIfElse\", _r1);\n    }\n  },\n  dependencies: [i4.NgIf, i2.RouterOutlet, i2.RouterLink, i5.DefaultLayoutDirective, i5.DefaultLayoutAlignDirective, i6.MatToolbar, i4.AsyncPipe],\n  styles: [\".app[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%] {\\n  cursor: pointer;\\n  font-size: 16px;\\n  text-decoration: none;\\n}\\n.app[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%]    + .link[_ngcontent-%COMP%] {\\n  margin-left: 10px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFDSTtFQUNJLGVBQUE7RUFDQSxlQUFBO0VBQ0EscUJBQUE7QUFBUjtBQUdJO0VBQ0ksaUJBQUE7QUFEUiIsImZpbGUiOiJhcHAuY29tcG9uZW50LnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIuYXBwIHtcbiAgICAubGluayB7XG4gICAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgICAgZm9udC1zaXplOiAxNnB4O1xuICAgICAgICB0ZXh0LWRlY29yYXRpb246IG5vbmU7XG4gICAgfVxuXG4gICAgLmxpbmsgKyAubGluayB7XG4gICAgICAgIG1hcmdpbi1sZWZ0OiAxMHB4O1xuICAgIH1cbn1cbiJdfQ== */\"]\n});","map":{"version":3,"mappings":";;;;;;;;;;;;IAGIA,4BAAiD,CAAjD,EAAiD,MAAjD,EAAiD,CAAjD;IAC0CA;IAAOA;IAC/CA;IAAmCA;IAAOA;IAC1CA;IAAMA;MAAAA;MAAA;MAAA,OAASA,+BAAT;IAAiB,CAAjB;IAAgCA;IAAMA;;;;;;IAG5CA,4BAAK,CAAL,EAAK,MAAL,EAAK,CAAL;IACwCA;IAAKA;IAC3CA;IAAyCA;IAAQA;;;;ACCzD,OAAM,MAAOC,YAAP,CAAmB;EACvBC,YACUC,WADV,EAEUC,MAFV,EAGUC,cAHV,EAGwC;IAF9B;IACA;IACA;EACT;;EAEMC,QAAQ;IACb,KAAKC,OAAL;EACD;;EAEMC,SAAS;IACd,OAAO,KAAKH,cAAL,CAAoBG,SAApB,EAAP;EACD;;EAEMC,MAAM;IACX,KAAKJ,cAAL,CAAoBK,MAApB;IACA,KAAKN,MAAL,CAAYO,QAAZ,CAAqB,CAAC,EAAD,CAArB;EACD;;EAEMJ,OAAO;IACZ,KAAKJ,WAAL,CAAiBS,EAAjB,GAAsBC,SAAtB,CACGC,IAAD,IAAe;MACb,KAAKT,cAAL,CAAoBU,KAApB,CAA0BD,IAA1B;IACD,CAHH,EAIGE,CAAD,IAAM;MACJ,KAAKX,cAAL,CAAoBK,MAApB;IACD,CANH;EAQD;;AA7BsB;;;mBAAZT,cAAYD;AAAA;;;QAAZC;EAAYgB;EAAAC;EAAAC;EAAAC;EAAAC;IAAA;MDZzBrB,+BAAiB,CAAjB,EAAiB,aAAjB,EAAiB,CAAjB,EAAiB,CAAjB,EAAiB,MAAjB;MAEUA;MAAUA;MAChBA;;MAKAA;MAMFA;MACAA;MACEA;MACFA;;;;;;MAdQA;MAAAA,6DAA2B,UAA3B,EAA2BsB,GAA3B","names":["i0","AppComponent","constructor","authService","router","sessionService","ngOnInit","autoLog","$isLogged","logout","logOut","navigate","me","subscribe","user","logIn","_","selectors","decls","vars","consts","template","_r1"],"sourceRoot":"","sources":["/home/edouard/projects/springsecurityauth/front/src/app/app.component.html","/home/edouard/projects/springsecurityauth/front/src/app/app.component.ts"],"sourcesContent":["<div class=\"app\">\n  <mat-toolbar color=\"primary\" fxLayout=\"row\" fxLayoutAlign=\"space-between center\">\n    <span>Rental app</span>\n    <div *ngIf=\"$isLogged() | async; else notLogged\">\n      <span routerLink=\"rentals\" class=\"link\">Rentals</span>\n      <span routerLink=\"me\" class=\"link\">Account</span>\n      <span (click)=\"logout()\" class=\"link\">Logout</span>\n    </div>\n    <ng-template #notLogged>\n      <div>\n        <span routerLink=\"login\" class=\"link\">Login</span>\n        <span routerLink=\"register\" class=\"link\">Register</span>\n      </div>\n    </ng-template>\n  </mat-toolbar>\n  <div>\n    <router-outlet></router-outlet>\n  </div>\n</div>","import { Component, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { Observable } from 'rxjs';\nimport { AuthService } from './features/auth/services/auth.service';\nimport { User } from './interfaces/user.interface';\nimport { SessionService } from './services/session.service';\n\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.scss']\n})\nexport class AppComponent implements OnInit {\n  constructor(\n    private authService: AuthService,\n    private router: Router,\n    private sessionService: SessionService) {\n  }\n\n  public ngOnInit(): void {\n    this.autoLog();\n  }\n\n  public $isLogged(): Observable<boolean> {\n    return this.sessionService.$isLogged();\n  }\n\n  public logout(): void {\n    this.sessionService.logOut();\n    this.router.navigate([''])\n  }\n\n  public autoLog(): void {\n    this.authService.me().subscribe(\n      (user: User) => {\n        this.sessionService.logIn(user);\n      },\n      (_) => {\n        this.sessionService.logOut();\n      }\n    )\n  }\n}\n"]},"metadata":{},"sourceType":"module"}